version: '2'

services:
  ci-integration-tests:
    image: microsoft/dotnet:${DOTNET_SDK_VERSION}-sdk
    network_mode: bridge
    container_name: integrationtests
    volumes:
     - .:/src
    working_dir: /src
    environment:
     - 'MTS_APP_SETTINGS_ConsulStoreConfiguration:Environment=${CONSUL_ENVIRONMENT}'
     - 'MTS_APP_SETTINGS_ConsulClientConfiguration:Address=${CONSUL_ADDRESS}'
    env_file:
     - integrationtestsparams.env
    external_links:
     - ${CONTAINER_NAME}
    command: sh run-integration-tests.sh
